(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{1277:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-settings",function(){return t(9419)}])},7272:function(e,a){"use strict";a.Z={src:"/_next/static/media/avatar-default.c0590f7f.png",height:1280,width:1280,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEXn6enm6Onl5+jk5ufj5ebi5OXh4+Tg4+Tf4uPf4ePf4eLX2tvW2dvW2drV2NrU19jS1dfHy83GyszFycu3vL+3vL62vL62u761u72rsbSqsbSpr7Oor7KorrKkq68h6ggBAAAARUlEQVR42hXIRxKAIBAEwA0DBhAVxYj8/5nCratJFcxQJUDcJACB5zcvXEHrlzdq06VrqCN9PM44Cpm9PHdJhmxw3rtgf050Aq7o+SM4AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},9419:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return N}});var s=t(5893),n=t(1163),r=t(7294),_=t(390),i=t.n(_),l=t(4179),o=t(263),c=t.n(o),u=t(2920);t(4213);var m=t(5675),d=t.n(m),h=t(9498),f=t(9434),p=t(7272),g=t(3454);let v=e=>{let{data:a}=e,[t,n]=(0,r.useState)(null),[_,i]=(0,r.useState)(),[o,m]=(0,r.useState)({name:"",email:"",avatar:""});(0,r.useEffect)(()=>{m({name:a&&a.rows[0].name,email:a&&a.rows[0].email,avatar:a&&a.rows[0].avatar})},[a]);let v=async()=>{let[e,a]=(0,f.z)(o.email,void 0,o.name);if(e){let t=localStorage.getItem("token");try{await fetch("".concat(g.env.NEXT_PUBLIC_UPDATE_USER),{method:"PUT",body:JSON.stringify({name:o.name,email:o.email}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(t)}}),u.Am.success("Your information has been successfully updated!")}catch(s){throw u.Am.error("Something went wrong, please try again later."),s}}i(a)},A=async()=>{let e=new FormData;e.append("file",t);let a=localStorage.getItem("token"),s=await fetch("http://localhost:3001/user/upload",{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(a)}});await s.json()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:c().__user_info_form,children:[(0,s.jsxs)("div",{className:c().__inputs,children:[(0,s.jsxs)("div",{className:c().__upload_avatar,children:[(0,s.jsx)(h.Z,{type:"file",onChange:e=>n(e.target.files[0])}),(0,s.jsx)(l.Z,{btnContent:"upload",onClick:A}),(0,s.jsx)("div",{className:c().__avatar,children:(0,s.jsx)(d(),{src:o.avatar?"".concat(g.env.NEXT_PUBLIC_BASE_URL,"/").concat(o.avatar):p.Z,alt:"Avatar",width:50,height:50})})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Z,{error:_&&_.find(e=>"name"===e.input),placeholder:"Name",label:"Name",isFullWidth:!0,value:o.name,onChange:e=>m({...o,name:e.target.value})}),_&&_.map((e,a)=>{if("name"===e.input)return(0,s.jsx)("p",{className:c().__error_message,children:e.message},a)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Z,{error:_&&_.find(e=>"email"===e.input),placeholder:"Email",label:"Email",isFullWidth:!0,type:"email",value:o.email,onChange:e=>m({...o,email:e.target.value})}),_&&_.map((e,a)=>{if("email"===e.input)return(0,s.jsx)("p",{className:c().__error_message,children:e.message},a)})]})]}),(0,s.jsx)("div",{className:c().__submit_btn,children:(0,s.jsx)(l.Z,{btnContent:"update",onClick:v})})]}),(0,s.jsx)(u.Ix,{position:"top-center",autoClose:1e3})]})};var A=t(175),x=t(4540),j=t(3454);let b=()=>{let[e,a]=(0,r.useState)(),{isLoggedIn:t}=(0,A.a)(),_=(0,n.useRouter)();return(0,r.useEffect)(()=>{(0,x.Yu)(j.env.NEXT_PUBLIC_GET_USER).then(e=>{a(e)})},[]),(0,r.useEffect)(()=>{t()||_.push("/")},[t,_]),(0,s.jsx)("div",{className:i().__user_informations,children:(0,s.jsxs)("div",{className:i().__container,children:[(0,s.jsx)("div",{className:i().__go_back_btn,onClick:()=>_.back(),children:(0,s.jsx)(l.Z,{btnContent:"go back",btnType:"borderless"})}),(0,s.jsxs)("div",{className:i().__wrapper,children:[(0,s.jsx)("h3",{children:"settings"}),(0,s.jsx)("div",{className:i().__form,children:(0,s.jsx)(v,{data:e})})]})]})})};var N=b},390:function(e){e.exports={__user_informations:"user-settings___user_informations__Q_fBZ",__container:"user-settings___container__XpluK",__go_back_btn:"user-settings___go_back_btn__Df3J5",__wrapper:"user-settings___wrapper__TWcIv"}},263:function(e){e.exports={__user_info_form:"styles___user_info_form__qGdYo",__inputs:"styles___inputs__wX7ui",__upload_avatar:"styles___upload_avatar__nZjuY",__avatar:"styles___avatar__Yq7xT",__error_message:"styles___error_message__N74U_"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1277)}),_N_E=e.O()}]);